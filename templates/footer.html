
  <footer class="main-footer">
    <strong>Copyright &copy; 2014-2019 <a href="http://adminlte.io">AdminLTE.io</a>.</strong>
    All rights reserved.
    <div class="float-right d-none d-sm-inline-block">
      <b>Version</b> 3.0.4
    </div>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="{{ url_for('static', filename='plugins/jquery/jquery.min.js') }}"></script>
<!-- jQuery UI 1.11.4 -->
<script src="{{ url_for('static', filename='plugins/jquery-ui/jquery-ui.min.js') }}"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
$.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="{{ url_for('static', filename='plugins/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
<!-- ChartJS -->
<script src="{{ url_for('static', filename='plugins/chart.js/Chart.min.js') }}"></script>
<!-- Sparkline -->
<script src="{{ url_for('static', filename='plugins/sparklines/sparkline.js') }}"></script>
<!-- JQVMap -->
<script src="{{ url_for('static', filename='plugins/jqvmap/jquery.vmap.min.js') }}"></script>
<script src="{{ url_for('static', filename='plugins/jqvmap/maps/jquery.vmap.usa.js') }}"></script>
<!-- jQuery Knob Chart -->
<script src="{{ url_for('static', filename='plugins/jquery-knob/jquery.knob.min.js') }}"></script>
<!-- daterangepicker -->
<script src="{{ url_for('static', filename='plugins/moment/moment.min.js') }}"></script>
<script src="{{ url_for('static', filename='plugins/daterangepicker/daterangepicker.js') }}"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="{{ url_for('static', filename='plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js') }}"></script>
<!-- Summernote -->
<script src="{{ url_for('static', filename='plugins/summernote/summernote-bs4.min.js') }}"></script>
<!-- overlayScrollbars -->
<script src="{{ url_for('static', filename='plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js') }}"></script>
<!-- AdminLTE App -->
<script src="{{ url_for('static', filename='dist/js/adminlte.js') }}"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="{{ url_for('static', filename='dist/js/pages/dashboard.js') }}"></script>
<!-- AdminLTE for demo purposes -->
<script src="{{ url_for('static', filename='dist/js/demo.js') }}"></script>

<!-- DataTables -->
<script src="{{ url_for('static', filename='plugins/datatables/jquery.dataTables.min.js') }}"></script>
<script src="{{ url_for('static', filename='plugins/datatables-bs4/js/dataTables.bootstrap4.min.js') }}"></script>
<script src="{{ url_for('static', filename='plugins/datatables-responsive/js/dataTables.responsive.min.js') }}"></script>
<script src="{{ url_for('static', filename='plugins/datatables-responsive/js/responsive.bootstrap4.min.js') }}"></script>


<!-- date-range-picker -->
<!-- <script src="{{ url_for('static', filename='plugins/daterangepicker/daterangepicker.js') }}"></script> -->

<!-- jQuery -->
<!-- <script src="{{ url_for('static', filename='plugins/jquery/jquery.min.js') }}"></script> -->
<!-- Bootstrap 4 -->
<!-- <script src="{{ url_for('static', filename='plugins/bootstrap/js/bootstrap.bundle.min.js') }}"></script> -->
<!-- ChartJS -->
<!-- <script src="{{ url_for('static', filename='plugins/chart.js/Chart.min.js') }}"></script> -->
<!-- AdminLTE App -->
<script src="{{ url_for('static', filename='dist/js/adminlte.min.js') }}"></script>
<!-- AdminLTE for demo purposes -->
<!-- <script src="{{ url_for('static', filename='dist/js/demo.js') }}"></script> -->
<!-- <script type="module" src="https://cdn.jsdelivr.net/npm/alasql@1.7"></script> -->
<!-- <script type="module" src="{{ url_for('static', filename='alasql/alasql.js') }}"></script> -->
<!-- page script -->
<script src="{{ url_for('static', filename='alasql/alasql.js') }}"></script>
<!-- lo dash -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>
<!-- create js for charting -->
<script src="{{url_for('static', filename='flask_chart.js') }}"></script>
<!-- create js penting -->
<script src="{{url_for('static', filename='script_penting.js') }}"></script>

<script>
$('#example1 tfoot th').each( function () {
      var title = $(this).text();
      $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
  } );
  var table = $('#example1').DataTable({
        "scrollY": 750,
          "scrollX": true,
          initComplete: function () {
              // Apply the search
              this.api().columns().every( function () {
                  var that = this;
   
                  $( 'input', this.footer() ).on( 'keyup change clear', function () {
                      if ( that.search() !== this.value ) {
                          that
                              .search( this.value )
                              .draw();
                      }
                    });
              });
          }
      });
      $(document).ready(function() {
            $('#From').daterangepicker(
            {
            startDate: moment().subtract('days', 29),
            endDate: moment(),
            dateLimit: { days: 60 },
            showDropdowns: true,
            showWeekNumbers: true,
            timePicker: false,
            timePickerIncrement: 1,
            timePicker12Hour: true,
            ranges: {
              'Today': [moment(), moment()],
              'Yesterday': [moment().subtract('days', 1), moment().subtract('days', 1)],
              'Last 7 Days': [moment().subtract('days', 6), moment()],
              'Last 30 Days': [moment().subtract('days', 29), moment()],
              'This Month': [moment().startOf('month'), moment().endOf('month')],
              'Last Month': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
            },
            opens: 'left',
            buttonClasses: ['btn btn-default'],
            applyClass: 'btn-small btn-primary',
            cancelClass: 'btn-small',
            format: 'DD/MM/YYYY',
            separator: ' to ',
            locale: {
                applyLabel: 'Submit',
                fromLabel: 'From',
                toLabel: 'To',
                customRangeLabel: 'Custom Range',
                daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr','Sa'],
                monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                firstDay: 1
            }
            },
            function(start, end) {
            console.log("Callback has been called!");
            $('#From span').html(start.format('D MMMM YYYY') + ' - ' + end.format('D MMMM YYYY'));
            startDate = start;
            endDate = end;    
            }
            );
            //Set the initial state of the picker label
            $('#From span').html(moment().subtract('days', 29).format('D MMMM YYYY') + ' - ' + moment().format('D MMMM YYYY'));

            $('#range').click(function(){
            var From = startDate.format('YYYY-MM-DD');
            var to = endDate.format('YYYY-MM-DD');
            console.log(From + ' - ' + to);
            if(From != '' && to != '')
            {
            var rows = table.rows().remove().draw();
            document.getElementById("canvasCKG").remove();
            document.getElementById("canvasFZ").remove();
              $.ajax({
                  url:"/range",
                  method:"POST",
                  data:{From:From, to:to},
                  success:function(data)
                  {

                    console.log(data,'data')
                    var arr1 = Object.keys(data);

                      obj = data[0].htmlresponse
                      // console.log(obj,'obj')
                      inputJSON = data[1].reponseCKG
                      console.log(inputJSON,'jsonData')
                      console.log(inputJSON.columns.length,'inputJSON')
                      cekk = data[2].responseFZ
                      console.log(cekk,'inputFZ2222222')
                      console.log(cekk.columns.length,'asd')
                      obj = obj.replace(/^\s*|\s*$/g, '');
                      obj = obj.replace(/\\r\\n/gm, '');

                      var expr = "</tr>\\s*<tr";
                      var regEx = new RegExp(expr, "gm");
                      var newRows = obj.replace(regEx, "</tr><tr");                        

                      table.rows.add($(newRows)).draw();
                      document.querySelector("#chartCKG").innerHTML = '<canvas id="canvasCKG" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>';
                      var stackedCKG = $("#canvasCKG").get(0).getContext("2d");
                      showChart(inputJSON,stackedCKG)
                      
                      document.querySelector("#chartFZ").innerHTML = '<canvas id="canvasFZ" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>';
                      var stackedFZ = $("#canvasFZ").get(0).getContext("2d");
                      showChart(cekk,stackedFZ)
                  }
              });
            }
            else
            {
              alert("Please Select the Date");
            }
            });

            }
            );
</script>

<script>
$(document).ready(function() {
$('#canvasCKG').each( function (){
      var valuedivCKG = document.getElementById('chartCKG').getAttribute('value')
      var inputJSONCKG=eval("("+valuedivCKG+")");
      console.log(inputJSONCKG,'inputJSONCKG<<')
      var stackedCKG = $("#canvasCKG").get(0).getContext("2d");
      showChart(inputJSONCKG,stackedCKG)
});
$('#canvasFZ').each( function (){
      var valuedivFZ = document.getElementById('chartFZ').getAttribute('value')
      var inputJSONFZ=eval("("+valuedivFZ+")");
      var stackedFZ = $("#canvasFZ").get(0).getContext("2d");
      showChart(inputJSONFZ,stackedFZ)
});
});
</script>

</body>
</html>
